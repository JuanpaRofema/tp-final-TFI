<div *ngIf="isLoading" class="spinner-overlay">
ย <div class="spinner-container">
ย ย <img src="assets/icono.png" class="spinning-logo">
ย ย <p>{{ diccionario[idioma()]['CargandoCarta'] }}</p>
ย </div>
</div>

<div class="body-snap">

ย <div class="snap-page first-page">
ย ย 
ย ย <div class="header-actions">
ย ย ย ย 
ย ย ย ย <button class="nav-icon-btn left" (click)="backHome()">
ย ย ย ย ย <fa-icon [icon]="faArrowLeft"></fa-icon>
ย ย ย ย </button>

ย ย ย ย <h1 class="main-title">{{ diccionario[idioma()]['NUESTRACARTA'] }}</h1>

ย ย ย ย <button class="nav-icon-btn right" (click)="viajarChat()">
ย ย ย ย ย <fa-icon [icon]="faRightFromBracket" style="transform: rotate(180deg);"></fa-icon> ๐ฌ
ย ย ย ย </button>
ย ย </div>

ย ย <div class="category-content" *ngIf="productsComida.length > 0">
ย ย ย <h2>๐ {{ diccionario[idioma()]['Comidas'] }}</h2>
ย ย ย <div class="cards-scroller">
ย ย ย ย <div class="food-card" *ngFor="let p of productsComida; let i = index" 
ย ย ย ย ย (click)="abrirModal(p)" [id]="'comida-' + i"> 
ย ย ย ย ย 
ย ย ย ย ย <div class="card-image-conteiner">
ย ย ย ย ย ย ย <button class="mini-arrow left"
ย ย ย ย ย *ngIf="p.image2"
ย ย ย ย ย (click)="$event.stopPropagation(); cambiarFotoCard(p, -1)">
ย ย ย ย ย โน
ย ย ย ย </button>

ย ย ย ย <img [src]="p.fotoActiva === 2 ? p.image2 : (p.fotoActiva === 3 ? p.image3 : p.image1)"
ย ย ย ย ย ย class="main-img">

ย ย ย ย ย ย ย ย <button class="mini-arrow right"
ย ย ย ย ย ย ย ย *ngIf="p.image2"
ย ย ย ย ย ย ย ย (click)="$event.stopPropagation(); cambiarFotoCard(p, 1)">
ย ย ย ย ย โบ
ย ย ย ย </button>
ย ย ย ย ย ย ย <div class="dots">
ย ย ย ย ย ย ย ย ย <span [class.active]="p.fotoActiva === 1"></span>
ย ย ย ย ย ย ย ย ย <span [class.active]="p.fotoActiva === 2" *ngIf="p.image2"></span>
ย ย ย ย ย ย ย ย ย <span [class.active]="p.fotoActiva === 3" *ngIf="p.image3"></span>
ย ย ย ย ย ย ย </div>
ย ย ย ย ย </div>
ย ย ย ย ย <div class="card-content">
ย ย ย ย ย ย <h3>{{ p.name }}</h3>
ย ย ย ย ย ย <p class="desc">{{ p.description }}</p>
ย ย ย ย ย ย <div class="meta-info">
ย ย ย ย ย ย ย <span class="time">โฑ {{ p.tiempoEstimado }}'</span>
ย ย ย ย ย ย ย <span class="price">${{ p.precio }}</span>
ย ย ย ย ย ย </div>
ย ย ย ย ย </div>
ย ย ย ย ย <div class="card-actions">
ย ย ย ย ย ย <button class="btn-qty minus" (click)="$event.stopPropagation(); modificarCantidad(p, -1)" [disabled]="p.cantidad === 0">-</button> ย ย ย ย
ย ย ย ย ย ย <span class="qty-display">{{ p.cantidad }}</span> ย ย ย ย
ย ย ย ย ย ย <button class="btn-qty plus" (click)="$event.stopPropagation(); modificarCantidad(p, 1)">+</button>
ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย </div>
ย ย </div>
ย </div> 
ย <div class="snap-page" *ngIf="productsBebida.length > 0">
ย ย <div class="category-content">
ย ย ย <h2>๐ฅค {{ diccionario[idioma()]['Bebidas'] }}</h2>
ย ย ย <div class="cards-scroller">
ย ย ย ย <div class="food-card" *ngFor="let p of productsBebida; let i = index"
ย ย ย ย ย (click)="abrirModal(p)" [id]="'bebida-' + i">
ย ย ย ย ย ย ย
ย ย ย ย ย <div class="card-image-conteiner">
ย ย ย ย ย ย ย <button class="mini-arrow left"
ย ย ย ย ย *ngIf="p.image2"
ย ย ย ย ย (click)="$event.stopPropagation(); cambiarFotoCard(p, -1)">
ย ย ย ย ย โน
ย ย ย ย </button>

ย ย ย ย <img [src]="p.fotoActiva === 2 ? p.image2 : (p.fotoActiva === 3 ? p.image3 : p.image1)"
ย ย ย ย ย ย class="main-img">

ย ย ย ย ย ย ย ย <button class="mini-arrow right"
ย ย ย ย ย ย ย ย *ngIf="p.image2"
ย ย ย ย ย ย ย ย (click)="$event.stopPropagation(); cambiarFotoCard(p, 1)">
ย ย ย ย ย โบ
ย ย ย ย </button> ย ย ย ย ย</div>
ย ย ย ย ย <div class="card-content">
ย ย ย ย ย ย <h3>{{ p.name }}</h3>
ย ย ย ย ย ย <p class="desc">{{ p.description }}</p>
ย ย ย ย ย ย <div class="meta-info">
ย ย ย ย ย ย ย <span class="time">โฑ {{ p.tiempoEstimado }}'</span>
ย ย ย ย ย ย ย <span class="price">${{ p.precio }}</span>
ย ย ย ย ย ย </div>
ย ย ย ย ย </div>
ย ย ย ย ย <div class="card-actions">
ย ย ย ย ย ย <button class="btn-qty minus" (click)="$event.stopPropagation(); modificarCantidad(p, -1)" [disabled]="p.cantidad === 0">-</button>
ย ย ย ย ย ย <span class="qty-display">{{ p.cantidad }}</span>
ย ย ย ย ย ย <button class="btn-qty plus" (click)="$event.stopPropagation(); modificarCantidad(p, 1)">+</button>
ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย </div>
ย ย </div>
ย </div>


ย <div class="snap-page" *ngIf="productsPostres.length > 0">
ย ย <div class="category-content">
ย ย ย <h2>๐ฅ {{ diccionario[idioma()]['Postres'] }}</h2>
ย ย ย <div class="cards-scroller">
ย ย ย ย <div class="food-card" *ngFor="let p of productsPostres; let i = index"
ย ย ย ย ย (click)="abrirModal(p)" [id]="'postre-' + i">
ย ย ย ย ย ย ย
ย ย ย ย ย <div class="card-image-conteiner">
ย ย ย ย ย ย ย <button class="mini-arrow left"
ย ย ย ย ย *ngIf="p.image2"
ย ย ย ย ย (click)="$event.stopPropagation(); cambiarFotoCard(p, -1)">
ย ย ย ย ย โน
ย ย ย ย </button>

ย ย ย ย <img [src]="p.fotoActiva === 2 ? p.image2 : (p.fotoActiva === 3 ? p.image3 : p.image1)"
ย ย ย ย ย ย class="main-img">

ย ย ย ย ย ย ย ย <button class="mini-arrow right"
ย ย ย ย ย ย ย ย *ngIf="p.image2"
ย ย ย ย ย ย ย ย (click)="$event.stopPropagation(); cambiarFotoCard(p, 1)">
ย ย ย ย ย โบ
ย ย ย ย </button> ย ย ย ย ย</div>
ย ย ย ย ย <div class="card-content">
ย ย ย ย ย ย <h3>{{ p.name }}</h3>
ย ย ย ย ย ย <p class="desc">{{ p.description }}</p>
ย ย ย ย ย ย <div class="meta-info">
ย ย ย ย ย ย ย <span class="time">โฑ {{ p.tiempoEstimado }}'</span>
ย ย ย ย ย ย ย <span class="price">${{ p.precio }}</span>
ย ย ย ย ย ย </div>
ย ย ย ย ย </div>
ย ย ย ย ย <div class="card-actions">
ย ย ย ย ย ย <button class="btn-qty minus" (click)="$event.stopPropagation(); modificarCantidad(p, -1)" [disabled]="p.cantidad === 0">-</button>
ย ย ย ย ย ย <span class="qty-display">{{ p.cantidad }}</span>
ย ย ย ย ย ย <button class="btn-qty plus" (click)="$event.stopPropagation(); modificarCantidad(p, 1)">+</button>
ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย </div>
ย ย </div>
ย </div>
ย 
ย <div class="spacer-bottom"></div>

</div>


<div class="cart-footer" *ngIf="totalPrecio > 0">
ย <div class="cart-details">
ย ย <div class="total-row">
ย ย ย <span>{{ diccionario[idioma()]['Total'] }}</span>
ย ย ย <span class="total-price">${{ totalPrecio }}</span>
ย ย </div>
ย ย <div class="time-row">
ย ย ย <small>{{ diccionario[idioma()]['Esperamรกx'] }} <strong>{{ tiempoEstimado }} {{ diccionario[idioma()]['min'] }}</strong></small>
ย ย </div>
ย </div>
ย <button class="confirm-btn" (click)="guardarPedido()">
ย ย {{ diccionario[idioma()]['CONFIRMAR'] }}
ย </button>
</div>

<div class="modal-overlay" *ngIf="isModalOpen && productoDestacado">
ย <div class="modal-content-sensor">
ย ย <div >
ย ย ย <button class="close-modal-btn" (click)="cerrarModal()">
ย ย ย <fa-icon [icon]="faArrowLeft"></fa-icon> {{ diccionario[idioma()]['Volver'] }}
ย ย </button>
ย ย </div>
ย ย 

ย ย <h2 class="modal-title">{{ productoDestacado.name }}</h2>

ย ย <div class="big-image-container">
ย ย ย <button class="nav-arrow left" *ngIf="productoDestacado.image2" (click)="cambiarFoto(-1)">โน</button>
ย ย ย<img [src]="productoDestacado.image1" 
ย ย ย ย ย ยclass="big-img animate-img"
ย ย ย ย ย ย[style.display]="fotoActualIndex === 1 ? 'block' : 'none'"
ย ย ย ย ย ย(click)="toggleSensorFotos()">
ย ย ย <img *ngIf="productoDestacado.image2"
ย ย ย ย ย ย[src]="productoDestacado.image2" 
ย ย ย ย ย ยclass="big-img animate-img"
ย ย ย ย ย ย[style.display]="fotoActualIndex === 2 ? 'block' : 'none'"
ย ย ย ย ย ย(click)="toggleSensorFotos()">
ย ย ย <img *ngIf="productoDestacado.image3"
ย ย ย ย ย ย[src]="productoDestacado.image3" 
ย ย ย ย ย ยclass="big-img animate-img"
ย ย ย ย ย ย[style.display]="fotoActualIndex === 3 ? 'block' : 'none'"
ย ย ย ย ย ย(click)="toggleSensorFotos()">
ย ย ย <button class="nav-arrow right" *ngIf="productoDestacado.image2" (click)="cambiarFoto(1)">โบ</button>
ย ย ย <div class="modal-dots">
ย ย ย ย <span [class.active]="fotoActualIndex === 1"></span>
ย ย ย ย <span [class.active]="fotoActualIndex === 2" *ngIf="productoDestacado.image2"></span>
ย ย ย ย <span [class.active]="fotoActualIndex === 3" *ngIf="productoDestacado.image3"></span>
ย ย ย </div>
ย ย ย <p class="sensor-hint" (click)="toggleSensorFotos()">
ย ย ย <fa-icon [icon]="faMobileScreen" 
ย ย ย ย ย ย ย ย ยclass="icono-vibrante"
ย ย ย ย ย ย ย ย ย[style.color]="sensorFotosActivo ? '#2ecc71' : '#fff'"
ย ย ย ย ย ย ย ย ย[style.animation]="sensorFotosActivo ? 'tilt-shaking 1.5s infinite' : 'none'">
ย ย ย </fa-icon>
ย ย ย <span *ngIf="!sensorFotosActivo">Toca para activar sensor</span>
ย ย ย <span *ngIf="sensorFotosActivo" style="color: #2ecc71; font-weight: bold;">{{ diccionario[idioma()]['Mueveelcelular'] }}</span>
ย ย </div>

ย ย <div class="modal-details">
ย ย ย <p>{{ productoDestacado.description }}</p>
ย ย ย <div class="price-big">${{ productoDestacado.precio }}</div>
ย ย ย <div class="modal-actions">
ย ย ย ย ย<button class="btn-qty-modal" (click)="modificarCantidad(productoDestacado, -1)" [disabled]="productoDestacado.cantidad === 0">-</button>
ย ย ย ย ย<span class="qty-modal">{{ productoDestacado.cantidad }}</span>
ย ย ย ย ย<button class="btn-qty-modal" (click)="modificarCantidad(productoDestacado, 1)">+</button>
ย ย ย </div>
ย ย ย <button class="btn-add-modal" (click)="cerrarModal()">Listo</button>
ย ย </div>

ย </div>
</div>